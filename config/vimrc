set nocompatible

" Vundle config
filetype off
" set the runtime path to include Vundle and initialize
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
" let Vundle manage Vundle, required
Plugin 'gmarik/vundle.vim'

" Vim behavior
Plugin 'aksrikanth/whitespace.vim'
Plugin 'ervandew/supertab'
Plugin 'jaxbot/semantic-highlight.vim'
Plugin 'jazzcore/ctrlp-cmatcher'
Plugin 'kien/ctrlp.vim'
Plugin 'majutsushi/tagbar'
Plugin 'tpope/vim-commentary'
Plugin 'tpope/vim-surround'
Plugin 'vim-scripts/zoomwin'

" Filetype specific
Plugin 'derekwyatt/vim-scala'
Plugin 'kchmck/vim-coffee-script'
Plugin 'mustache/vim-mustache-handlebars'
Plugin 'pangloss/vim-javascript'
Plugin 'tpope/vim-haml'
Plugin 'tpope/vim-markdown'

" Colorschemes
Plugin 'nanotech/jellybeans.vim'

" All of your Plugins must be added before the following line
call vundle#end()            " required
filetype plugin indent on    " required

set encoding=utf-8

set showcmd
set helplang=en
set history=50
set incsearch

set smartindent
set linebreak
set backspace=indent,eol,start
set mouse=a
set ttymouse=xterm2

set printoptions=paper:letter
set ruler
set laststatus=2
set expandtab
set tabstop=2
set softtabstop=2
set shiftwidth=2
set cursorline

set termencoding=utf-8
set viminfo='20,\"50
set suffixes=.bak,~,.swp,.o,.info,.aux,.log,.dvi,.bbl,.blg,.brf,.cb,.ind,.idx,.ilg,.inx,.out,.toc
set directory=~/tmp

set modeline
set wildmenu

set fillchars=stl:\ ,stlnc:\ ,vert:│,fold:─,diff:─
set listchars=eol:⊸,tab:⊡⋅,extends:▻,precedes:◅,nbsp:◻
set foldmethod=marker
set background=dark
set colorcolumn=81

filetype indent on
filetype plugin on
syntax on

set t_Co=256
" Default colorscheme
colorscheme jellybeans

highlight NonText ctermfg=DarkMagenta
highlight SpecialKey ctermfg=DarkMagenta
highlight ColorColumn ctermbg=53 guibg=#662244

" Close all active buffers
function! Clear()
  1,10000bd
endfunction

let mapleader = ','

" Tab navigation
map <S-Left> gT
map <S-Right> gt
imap <S-Left> <Esc>gT
imap <S-Right> <Esc>gt

" Action mappings
nmap <leader>c <plug>CommentaryLine
vmap <leader>c <plug>Commentary
nmap <leader>t :TagbarToggle<CR>
nmap <leader>x :call Clear()<CR>
nmap <leader>s :SemanticHighlightToggle<CR>

" Plugin configuration
let g:ctrlp_follow_symlinks=0
let g:ctrlp_match_func = {'match' : 'matcher#cmatch' }
let g:ctrlp_max_depth=100
let g:ctrlp_max_files=0
let g:ctrlp_working_path_mode = 'ra'
let g:mustache_abbreviations = 1

" Local configurations
let extfile = expand("<sfile>:h") . "/.local_vimrc"
if filereadable(extfile)
  source <sfile>:h/.local_vimrc
endif
